# ============================================
# Nebula ID 环境变量配置示例
# ============================================
# 复制此文件为 .env 并根据需要修改配置
# 本配置文件同时支持本地开发和 Docker Compose 部署

# ============================================
# PostgreSQL 数据库配置
# ============================================
# 本地开发使用
NEBULA_DATABASE_URL=postgresql://idgen:your_secure_password@localhost:5432/idgen
NEBULA_DATABASE_PASSWORD=your_secure_password

# Docker Compose 使用
POSTGRES_PASSWORD=idgen123
POSTGRES_PORT=5432

# ============================================
# Redis 配置
# ============================================
# 本地开发使用
NEBULA_REDIS_URL=redis://localhost:6379

# Docker Compose 使用
REDIS_PORT=6379

# ============================================
# etcd 配置
# ============================================
# 本地开发使用
NEBULA_ETCD_ENDPOINTS=http://localhost:2379

# Docker Compose 使用
ETCD_CLIENT_PORT=2379
ETCD_PEER_PORT=2380

# ============================================
# 应用配置
# ============================================
NEBULA_APP_NAME=nebula-id
NEBULA_HOST=127.0.0.1
NEBULA_HTTP_PORT=8080
APP_GRPC_PORT=9091

# Docker Compose 使用
APP_HTTP_PORT=8080
APP_METRICS_PORT=9091
DC_ID=0

# ============================================
# 日志配置
# ============================================
# 可选值: error, warn, info, debug, trace
RUST_LOG=info
RUST_BACKTRACE=0

# ============================================
# 认证配置
# ============================================
# API keys 应该通过数据库管理，不要硬编码
# 使用 API 创建工作空间的 API keys

# ============================================
# TLS 配置
# ============================================
NEBULA_TLS_ENABLED=false
NEBULA_TLS_CERT_PATH=
NEBULA_TLS_KEY_PATH=

# ============================================
# 速率限制配置
# ============================================
NEBULA_RATE_LIMIT_DEFAULT_RPS=1000
NEBULA_RATE_LIMIT_BURST_SIZE=1000

# ============================================
# 监控配置
# ============================================
NEBULA_MONITORING_ENABLED=true
NEBULA_METRICS_PORT=9090

# ============================================
# 资源限制（Docker Compose 使用）
# ============================================
# CPU 核心数限制
CPU_LIMIT=2
# 内存限制（单位：MB）
MEMORY_LIMIT=2048

# ============================================
# 使用说明
# ============================================
# 本地开发:
#   1. 复制此文件为 .env
#   2. 修改 NEBULA_DATABASE_URL, NEBULA_REDIS_URL, NEBULA_ETCD_ENDPOINTS
#   3. 运行: cargo run --bin nebula-id
#
# Docker Compose 部署:
#   1. 复制此文件为 .env
#   2. 修改 POSTGRES_PASSWORD 等配置
#   3. 运行: ./docker/deploy.sh start
#
# 注意:
#   - 本地开发使用 NEBULA_* 前缀的变量
#   - Docker Compose 使用无前缀的变量（如 POSTGRES_PASSWORD）
#   - 部分变量在两种环境下都可用（如 RUST_LOG）